name: WF DEVELOP
on:
  push:
    branches: 
      - develop 
  pull_request:
    types:
      - labeled
      - unlabeled
      - synchronize
      - opened
      - edited
      - ready_for_review
      - reopened
      - unlocked
    branches: 
      - develop
jobs:
  job1:
    name: Pruebas
    runs-on: ubuntu-latest
    steps:
    - name: Checkout de repositorio
      uses: actions/checkout@v2
    - name: ConfiguraciÃ³n de entorno de python
      uses: actions/setup-python@v2
      with:
          python-version: '3.7'
    - name: Correr pruebas
      id: correr-pruebas
      run: python src/codigo.py
  # create-branch:
  #   if: ${{ contains(github.event.head_commit.message, 'RELEASE') }}
  #   name: create-release-branch
  #   needs: job1
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Checkout de repositorio
  #       uses: actions/checkout@v2
  #     - name: generate FOO unique variable based on timestamp
  #       run: echo FOO=$(date +%s) >> $GITHUB_ENV
  #     - name: create branch
  #       uses: peterjgrainger/action-create-branch@v2.0.1
  #       env:
  #         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  #       with:
  #         branch: "release_${{ env.FOO }}"
  build:
    if: ${{ contains(github.event.head_commit.message, 'RELEASE') }}
    name: Create Release
    needs: job1
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Create Release
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # This token is provided by Actions, you do not need to create your own token
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body: |
            Changes in this Release
            - First Change
            - Second Change
          draft: false
          prerelease: false